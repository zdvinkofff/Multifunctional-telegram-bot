# Multifunctional-telegram-bot
Документация по проекту "Многофункциональный телеграм-бот"
Многофункциональный телеграм-бот

Импорты и установка бота:

Импортируются необходимые библиотеки, такие как telebot, PIL, io, cv2, numpy и random.
Загружается токен бота Telegram из переменной окружения с помощью load_dotenv().
Создается экземпляр бота Telegram с использованием telebot.TeleBot(TOKEN).
Создается словарь user_states для хранения состояний пользователей.
Определяется набор символов ASCII_CHARS для создания ASCII-арта.
Создаются списки JOKES и COMPLIMENTS с шутками и комплиментами соответственно.
Обработка команд /start и /help:

Функция send_welcome(message) обрабатывает команды /start и /help.
Она создает клавиатуру с основными функциями бота (подбрасывание монетки, случайная шутка, случайный комплимент) и отправляет ее пользователю.
Подбрасывание монетки:

Функция flip_a_coin(message) обрабатывает команду /flip_a_coin.
Она сохраняет состояние пользователя в user_states и запрашивает подтверждение на подбрасывание монетки, отправляя пользователю инлайн-клавиатуру с кнопками "Да" и "Нет".
Функция get_confirmation_keyboard() создает эту инлайн-клавиатуру.
Функция callback_query(call) обрабатывает нажатия на кнопки инлайн-клавиатуры.
Если пользователь нажимает "Да", вызывается функция do_flip_a_coin(message), которая симулирует подбрасывание монетки и отправляет результат пользователю. Затем она сбрасывает состояние пользователя.
Если пользователь нажимает "Нет", он возвращается в основное меню.
Отправка случайной шутки или комплимента:

Функции send_random_joke(message) и send_random_compliment(message) обрабатывают команды /random_joke и /random_compliment соответственно.
Они выбирают случайную шутку или комплимент из соответствующих списков и отправляют их пользователю.
Обработка изображений:

Функция handle_photo(message) обрабатывает изображения, отправленные пользователем.
Она сохраняет ID изображения и переводит пользователя в состояние ожидания ввода символов для ASCII-арта.
Функция handle_ascii_chars(message) обрабатывает ввод пользователя для символов ASCII-арта.
Она сохраняет введенные символы в user_states и показывает пользователю клавиатуру с доступными вариантами обработки изображения.
Функция get_options_keyboard() создает эту инлайн-клавиатуру.
Функция callback_query(call) обрабатывает нажатия на кнопки инлайн-клавиатуры, вызывая соответствующие функции для обработки изображения:
negative_and_send(message): Применяет эффект негатива к изображению и отправляет его пользователю.
pixelate_and_send(message): Применяет эффект пикселизации к изображению и отправляет его пользователю.
ascii_and_send(message): Преобразует изображение в ASCII-арт и отправляет его пользователю.
heatmap_and_send(message): Применяет эффект тепловой карты к изображению и отправляет его пользователю.
Вспомогательные функции:

resize_for_sticker(image, max_size=512): Изменяет размер изображения, сохраняя пропорции, чтобы его максимальное измерение не превышало заданного максимума.
resize_image(image, new_width=100): Изменяет размер изображения, сохраняя пропорции.
grayify(image): Преобразует изображение в оттенки серого.
invert_colors(image): Инвертирует цвета изображения.
image_to_ascii(image_stream, new_width=40, ascii_chars=ASCII_CHARS): Преобразует изображение в ASCII-арт.
pixels_to_ascii(image, ascii_chars=ASCII_CHARS): Преобразует пиксели изображения в ASCII-символы.
pixelate_image(image, pixel_size): Пикселизует изображение.
convert_to_heatmap(image_stream): Преобразует изображение в тепловую карту.
Основной цикл бота:

В конце кода вызывается bot.polling(none_stop=True), чтобы бот начал прослушивать сообщения и команды пользователя.
Этот код представляет собой Telegram-бота, который может подбрасывать монетку, отправлять случайные шутки и комплименты, а также применять различные эффекты к изображениям, отправленным пользователем, таким как негатив, пикселизация, ASCII-арт и тепловая карта.
